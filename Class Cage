using System;
using System.Collections.Generic;

namespace AnimalManagement
{
    public class Cage
    {
        public string CageID { get; private set; }
        public double Size { get; set; }
        public int Capacity { get; set; }
        public List<Animal> ListAnimals { get; private set; }
        public string Habitat { get; set; }

        public Cage(double size, int capacity, int count)
        {
            Size = size;
            Capacity = capacity;
            CageID = $"CH{count:D2}";
            ListAnimals = new List<Animal>();
        }

        public static string CreCageID(int count)
        {
            return $"CH{count:D2}";
        }

        public bool ValidSpace()
        {
            return ListAnimals.Count < Capacity;
        }

        public void AddAnimal(Animal animal)
        {
            if (ValidSpace())
            {
                ListAnimals.Add(animal);
                Habitat = animal.Species.Habitat;
            }
            else
            {
                throw new Exception("Cage is full!");
            }
        }

        public void RemoveAnimal(string animalID)
        {
            ListAnimals.RemoveAll(a => a.ID == animalID);
        }

        public void PrintCage()
        {
            Console.WriteLine($"CageID: {CageID}, Size: {Size}mÂ², Capacity: {Capacity}, Habitat: {Habitat}, Animals: {ListAnimals.Count}");
        }
    }
}
